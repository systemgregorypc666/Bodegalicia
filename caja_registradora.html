<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caja Registradora - Bodegalicia</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { background: #121212; color: white; font-family: sans-serif; padding: 20px; }
        .checkout-card {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0,255,204,0.3);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            margin: 0 auto;
        }
        h2 { color: #00ffcc; text-align: center; }
        .item-resumen { background: rgba(0,85,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 4px solid #0055ff; }
        label { display: block; margin-top: 15px; color: #aaa; font-size: 0.9em; }
        input, select, textarea {
            width: 100%; padding: 12px; margin-top: 5px;
            background: #1a1a1a; border: 1px solid #333;
            color: white; border-radius: 8px; box-sizing: border-box;
        }
        .btn-confirmar {
            width: 100%; background: #00ffcc; color: #000;
            border: none; padding: 15px; margin-top: 25px;
            border-radius: 10px; font-weight: bold; cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="checkout-card">
        <h2>ðŸ›’ Caja Registradora</h2>
        
        <div class="item-resumen" id="resumen">
            </div>

        <form id="formPedido">
            <label>Nombre del Cliente</label>
            <input type="text" id="nombre" placeholder="Ej. Juan PÃ©rez" required>

            <label>MÃ©todo de Pago</label>
            <select id="pago">
                <option value="Pago Movil / BS">Pago MÃ³vil / Transferencia (BS)</option>
                <option value="Nequi / COP">Nequi (COP)</option>
                <option value="Zelle / USD">Banca EEUU (Zelle)</option>
                <option value="Suiza / EUR">Suiza (Euro)</option>
                <option value="Efectivo">Efectivo</option>
            </select>

            <label>Tipo de Entrega</label>
            <select id="entrega" onchange="toggleDireccion()">
                <option value="Retiro Personal">Retiro Personal (San CristÃ³bal)</option>
                <option value="Delivery">Delivery (A domicilio)</option>
            </select>

            <div id="campoDireccion" style="display:none;">
                <label>DirecciÃ³n Detallada</label>
                <textarea id="direccion" placeholder="Calle, nÃºmero de casa, punto de referencia..."></textarea>
            </div>

            <button type="button" class="btn-confirmar" onclick="enviarPedido()">
                âœ… CONFIRMAR Y ENVIAR WHATSAPP
            </button>
        </form>
    </div>

    <script>
        // Capturar datos de la URL (lo que viene del index.html)
        const params = new URLSearchParams(window.location.search);
        const producto = params.get('p') || "Producto";
        const precio = params.get('pr') || "0";
        const moneda = params.get('m') || "";

        document.getElementById('resumen').innerHTML = `
            <strong>Producto:</strong> ${producto}<br>
            <strong>Total:</strong> ${precio} ${moneda}
        `;

        function toggleDireccion() {
            const entrega = document.getElementById('entrega').value;
            document.getElementById('campoDireccion').style.display = (entrega === "Delivery") ? "block" : "none";
        }

        function enviarPedido() {
            const cliente = document.getElementById('nombre').value;
            const pago = document.getElementById('pago').value;
            const entrega = document.getElementById('entrega').value;
            const direccion = document.getElementById('direccion').value;

            if(!cliente) { alert("Por favor, ingrese su nombre."); return; }

            const tel = "584161177334";
            const texto = `*BODEGALICIA - NUEVA ORDEN*\n` +
                          `--------------------------\n` +
                          `*Cliente:* ${cliente}\n` +
                          `*Producto:* ${producto}\n` +
                          `*Monto:* ${precio} ${moneda}\n` +
                          `*Pago:* ${pago}\n` +
                          `*Entrega:* ${entrega}\n` +
                          (entrega === "Delivery" ? `*DirecciÃ³n:* ${direccion}\n` : "") +
                          `--------------------------\n` +
                          `*Protocolo Anti-Mafia Activo*`;

            window.open(`https://wa.me/${tel}?text=${encodeURIComponent(texto)}`, '_blank');
        }
    </script>
</body>
</html>
